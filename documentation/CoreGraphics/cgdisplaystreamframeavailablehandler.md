# CGDisplayStreamFrameAvailableHandler

**Framework**: Core Graphics  
**Kind**: typealias

A block called when a data stream has a new frame event to process.

**Availability**:
- Mac Catalyst ?+
- macOS ?+

## Declaration

```swift
typealias CGDisplayStreamFrameAvailableHandler = (CGDisplayStreamFrameStatus, UInt64, IOSurfaceRef?, CGDisplayStreamUpdate?) -> Void
```

#### Discussion

The handler is called whenever the display stream has updated content to process as well as when other events occur. Each time a new frame is generated, the block receives an `IOSurface` object that contains the pixel data as well as an update object that describes the frame update.

The handler receives the following parameters:

If you need to maintain a reference to the surface beyond the lifetime of the handler call, you must call the [`CFRetain`](https://developer.apple.com/documentation/CoreFoundation/CFRetain) function to retain the surface and the [`IOSurfaceIncrementUseCount(_:)`](https://developer.apple.com/documentation/IOSurface/IOSurfaceIncrementUseCount(_:)) function to let the display stream know that the frame is not ready for re-use. Once you are finished using the surface you must call the [`IOSurfaceDecrementUseCount(_:)`](https://developer.apple.com/documentation/IOSurface/IOSurfaceDecrementUseCount(_:)) function and then call the [`CFRelease`](https://developer.apple.com/documentation/CoreFoundation/CFRelease) function. If you are maintaining a cache of information about the surface (such as a GL texture object created from the surface’s contents), you must not call release it until after you remove it from your cache.

You can not depend on the set of surfaces being used by the display stream as being static, so you should remove surfaces from the cache when they haven’t been re-used in a while.

If you need to hold onto the metadata beyond the lifetime of the handler call, you must call the [`CFRetain`](https://developer.apple.com/documentation/CoreFoundation/CFRetain) function on the update reference before the end of the handler. When you are finished with the update, call the call the [`CFRelease`](https://developer.apple.com/documentation/CoreFoundation/CFRelease) function.

This parameter holds `NULL` when the `status` parameter’s has any value other than [`CGDisplayStreamFrameStatus.frameComplete`](cgdisplaystreamframestatus/framecomplete.md).

## See Also

- [typealias CGButtonCount](cgbuttoncount.md)
  Represents the number of buttons being set in a synthetic mouse event.
- [typealias CGCharCode](cgcharcode.md)
  Represents a character generated by pressing one or more keys on a keyboard.
- [typealias CGDirectDisplayID](cgdirectdisplayid.md)
  A unique identifier for an attached display.
- [typealias CGDisplayBlendFraction](cgdisplayblendfraction.md)
  The percentage of blend color used in a fade operation.
- [typealias CGDisplayConfigRef](cgdisplayconfigref.md)
  A reference to a display configuration transaction.
- [typealias CGDisplayCount](cgdisplaycount.md)
  The number of displays in various lists.
- [typealias CGDisplayErr](cgdisplayerr.md)
  A uniform type for result codes returned by functions in Quartz Display Services.
- [typealias CGDisplayFadeInterval](cgdisplayfadeinterval.md)
  The duration in seconds of a fade operation or a fade hardware reservation.
- [typealias CGDisplayFadeReservationToken](cgdisplayfadereservationtoken.md)
  A token issued by Quartz when reserving one or more displays for a fade operation during a specified interval.
- [class CGDisplayMode](cgdisplaymode.md)
  A reference to a display mode object.
- [typealias CGDisplayReconfigurationCallBack](cgdisplayreconfigurationcallback.md)
  A client-supplied callback function that’s invoked whenever the configuration of a local display is changed.
- [typealias CGDisplayReservationInterval](cgdisplayreservationinterval.md)
  The time interval for a fade reservation.
- [class CGDisplayStream](cgdisplaystream.md)
  A reference to a display stream object.
- [class CGDisplayStreamUpdate](cgdisplaystreamupdate.md)
  A reference to frame update’s metadata.
- [class CGEvent](cgevent.md)
  Defines an opaque type that represents a low-level hardware event.


---

*[View on Apple Developer](https://developer.apple.com/documentation/coregraphics/cgdisplaystreamframeavailablehandler)*