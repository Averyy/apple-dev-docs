# confirmation(_:expectedCount:isolation:sourceLocation:_:)

**Framework**: Swift Testing  
**Kind**: func

Confirm that some event occurs during the invocation of a function.

**Availability**:
- iOS ?+
- iPadOS ?+
- Mac Catalyst ?+
- macOS ?+
- tvOS ?+
- visionOS ?+
- watchOS ?+
- Swift 6.0+
- Xcode 16.0+

## Declaration

```swift
func confirmation<R>(_ comment: Comment? = nil, expectedCount: Int = 1, isolation: isolated (any Actor)? = #isolation, sourceLocation: SourceLocation = #_sourceLocation, _ body: (Confirmation) async throws -> sending R) async rethrows -> R
```

## Mentions

- [Migrating a test from XCTest](migratingfromxctest.md)
- [Testing asynchronous code](testing-asynchronous-code.md)

#### Return Value

Whatever is returned by `body`.

#### Discussion

> **Note**: Whatever is thrown by `body`.

Use confirmations to check that an event occurs while a test is running in complex scenarios where `#expect()` and `#require()` are insufficient. For example, a confirmation may be useful when an expected event occurs:

- In a context that cannot be awaited by the calling function such as an event handler or delegate callback;
- More than once, or never; or
- As a callback that is invoked as part of a larger operation.

To use a confirmation, pass a closure containing the work to be performed. The testing library will then pass an instance of [`Confirmation`](confirmation.md) to the closure. Every time the event in question occurs, the closure should call the confirmation:

```swift
let n = 10
await confirmation("Baked buns", expectedCount: n) { bunBaked in
  foodTruck.eventHandler = { event in
    if event == .baked(.cinnamonBun) {
      bunBaked()
    }
  }
  await foodTruck.bake(.cinnamonBun, count: n)
}
```

When the closure returns, the testing library checks if the confirmationâ€™s preconditions have been met, and records an issue if they have not.

## Parameters

- `comment`: An optional comment to apply to any issues generated by this   function.
- `expectedCount`: The number of times the expected event should occur when    is invoked. The default value of this argument is  , indicating   that the event should occur exactly once. Pass   if the event should    occur when   is invoked.
- `isolation`: The actor to which   is isolated, if any.
- `sourceLocation`: The source location to which any recorded issues should   be attributed.
- `body`: The function to invoke.

## See Also

- [Testing asynchronous code](testing-asynchronous-code.md)
  Validate whether your code causes expected events to happen.
- [func confirmation<R>(Comment?, expectedCount: some RangeExpression<Int> & Sendable & Sequence<Int>, isolation: isolated (any Actor)?, sourceLocation: SourceLocation, (Confirmation) async throws -> sending R) async rethrows -> R](confirmation(_:expectedcount:isolation:sourcelocation:_:)-l3il.md)
  Confirm that some event occurs during the invocation of a function.
- [struct Confirmation](confirmation.md)
  A type that can be used to confirm that an event occurs zero or more times.


---

*[View on Apple Developer](https://developer.apple.com/documentation/testing/confirmation(_:expectedcount:isolation:sourcelocation:_:)-5mqz2)*