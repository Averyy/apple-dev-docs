# confirmation(_:expectedCount:isolation:sourceLocation:_:)

**Framework**: Swift Testing  
**Kind**: func

Confirm that some event occurs during the invocation of a function.

**Availability**:
- Swift 6.1+
- Xcode 16.3+

## Declaration

```swift
func confirmation<R>(_ comment: Comment? = nil, expectedCount: some RangeExpression<Int> & Sendable & Sequence<Int>, isolation: isolated (any Actor)? = #isolation, sourceLocation: SourceLocation = #_sourceLocation, _ body: (Confirmation) async throws -> sending R) async rethrows -> R
```

## Mentions

- [Migrating a test from XCTest](migratingfromxctest.md)
- [Testing asynchronous code](testing-asynchronous-code.md)

#### Return Value

Whatever is returned by `body`.

#### Discussion

> **Note**: Whatever is thrown by `body`.

Use confirmations to check that an event occurs while a test is running in complex scenarios where `#expect()` and `#require()` are insufficient. For example, a confirmation may be useful when an expected event occurs:

- In a context that cannot be awaited by the calling function such as an event handler or delegate callback;
- More than once, or never; or
- As a callback that is invoked as part of a larger operation.

To use a confirmation, pass a closure containing the work to be performed. The testing library will then pass an instance of [`Confirmation`](confirmation.md) to the closure. Every time the event in question occurs, the closure should call the confirmation:

```swift
let minBuns = 5
let maxBuns = 10
await confirmation(
  "Baked between \(minBuns) and \(maxBuns) buns",
  expectedCount: minBuns ... maxBuns
) { bunBaked in
  foodTruck.eventHandler = { event in
    if event == .baked(.cinnamonBun) {
      bunBaked()
    }
  }
  await foodTruck.bakeTray(of: .cinnamonBun)
}
```

When the closure returns, the testing library checks if the confirmationâ€™s preconditions have been met, and records an issue if they have not.

If an exact count is expected, use [`confirmation(_:expectedCount:isolation:sourceLocation:_:)`](confirmation(_:expectedcount:isolation:sourcelocation:_:)-5mqz2.md) instead.

## Parameters

- `comment`: An optional comment to apply to any issues generated by this   function.
- `expectedCount`: A range of integers indicating the number of times the   expected event should occur when   is invoked.
- `isolation`: The actor to which   is isolated, if any.
- `sourceLocation`: The source location to which any recorded issues should   be attributed.
- `body`: The function to invoke.

## See Also

- [Testing asynchronous code](testing-asynchronous-code.md)
  Validate whether your code causes expected events to happen.
- [func confirmation<R>(Comment?, expectedCount: Int, isolation: isolated (any Actor)?, sourceLocation: SourceLocation, (Confirmation) async throws -> sending R) async rethrows -> R](confirmation(_:expectedcount:isolation:sourcelocation:_:)-5mqz2.md)
  Confirm that some event occurs during the invocation of a function.
- [struct Confirmation](confirmation.md)
  A type that can be used to confirm that an event occurs zero or more times.


---

*[View on Apple Developer](https://developer.apple.com/documentation/testing/confirmation(_:expectedcount:isolation:sourcelocation:_:)-l3il)*