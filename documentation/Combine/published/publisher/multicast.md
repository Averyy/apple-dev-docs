# multicast(_:)

**Framework**: Combine  
**Kind**: method

Applies a closure to create a subject that delivers elements to subscribers.

**Availability**:
- iOS 13.0+
- iPadOS 13.0+
- Mac Catalyst 13.0+
- macOS 10.15+
- tvOS 13.0+
- visionOS 1.0+
- watchOS 6.0+

## Declaration

```swift
func multicast<S>(_ createSubject: @escaping () -> S) -> Publishers.Multicast<Self, S> where S : Subject, Self.Failure == S.Failure, Self.Output == S.Output
```

#### Discussion

Use a multicast publisher when you have multiple downstream subscribers, but you want upstream publishers to only process one [`receive(_:)`](subscriber/receive(_:).md) call per event. This is useful when upstream publishers are doing expensive work you donâ€™t want to duplicate, like performing network requests.

In contrast with [`multicast(subject:)`](published/publisher/multicast(subject:).md), this method produces a publisher that creates a separate [`Subject`](subject.md) for each subscriber.

The following example uses a sequence publisher as a counter to publish three random numbers, generated by a [`map(_:)`](publisher/map(_:)-99evh.md) operator. It uses a [`multicast(_:)`](published/publisher/multicast(_:).md) operator whose closure creates a [`PassthroughSubject`](passthroughsubject.md) to share the same random number to each of two subscribers. Because the multicast publisher is a [`ConnectablePublisher`](connectablepublisher.md), publishing only begins after a call to [`connect()`](connectablepublisher/connect().md).

```swift
let pub = ["First", "Second", "Third"].publisher
    .map( { return ($0, Int.random(in: 0...100)) } )
    .print("Random")
    .multicast { PassthroughSubject<(String, Int), Never>() }

cancellable1 = pub
   .sink { print ("Stream 1 received: \($0)")}
cancellable2 = pub
   .sink { print ("Stream 2 received: \($0)")}
pub.connect()

// Prints:
// Random: receive value: (("First", 9))
// Stream 2 received: ("First", 9)
// Stream 1 received: ("First", 9)
// Random: receive value: (("Second", 46))
// Stream 2 received: ("Second", 46)
// Stream 1 received: ("Second", 46)
// Random: receive value: (("Third", 26))
// Stream 2 received: ("Third", 26)
// Stream 1 received: ("Third", 26)
```

In this example, the output shows that the [`print(_:to:)`](published/publisher/print(_:to:).md) operator receives each random value only one time, and then sends the value to both subscribers.

## Parameters

- `createSubject`: A closure to create a new   each time a subscriber attaches to the multicast publisher.

## See Also

- [func multicast<S>(subject: S) -> Publishers.Multicast<Self, S>](published/publisher/multicast(subject:).md)
  Provides a subject to deliver elements to multiple subscribers.
- [func share() -> Publishers.Share<Self>](published/publisher/share.md)
  Shares the output of an upstream publisher with multiple subscribers.


---

*[View on Apple Developer](https://developer.apple.com/documentation/combine/published/publisher/multicast(_:))*